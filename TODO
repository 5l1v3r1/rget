# MVP

## MVP - Single File GH Release Test

Use: Create a certificate for the tar ball release of a GitHub release only.
Proof points:
x Create sub commands via cobra
x Sha256sum generation from GitHub
x Git log for sha files generated from Github
x Webservice serving up sha files for wildcard domain from git
x Request/issue Let's Encrypt certificate
x Check CT log entry on crt.sh via a subcommand
x Verify CT log entry in program via a subcommand
x Verify file URL SHA256Sum is in SHA256Sum returned by server
x Verify SHA256Sum value matches domain merkle root

## MVP+0.5 - Generate certificates
x Create container for sget serve
x Use autocert to create API endpoint certificate
x Create Kubernetes manifests for sget serve
x Get sget serve running on Kubernetes cluster behind established.ifup.org load balancer
x Use autocert to create certificates for first few sum files
- Debug lack of SANs on cert issued by autocert....
                  DNS:5c793eed08df469f8a40a0465f767677.established.ifup.org
		  openssl x509 -in /tmp/cert -text -noout | less 
looks like prefix code isn't working right:
	hostPolicy called 5c793eed08df469f8a40a0465f767677.established.ifup.org
	skipping a dir without errors: .git
	5c793eed08df469f8a40a0465f767677 SANs []
	hostPolicy err <nil>

and potentially need to change hostPolicy to actually return a CN to fix the code paths where autocert wants to hit the cache for a SAN but that cert won't exist:
019/06/29 06:25:18 http: TLS handshake error from 10.52.2.1:33924: common name cannot have subdomains .established.ifup.org
hostPolicy called 5c793eed08df469f8a40a0465f767677.a73ecbf830829713e0037efd9b1a357e.v2.0.releases-test.philips.github.com.establis$
ed.ifup.org
- Add flag to submit to a different URL and add a default

## MVP+1 - Guess at SHA256Sum location

Use: let publisher put the SHA256Sum somewhere and download it to guess at domain
x Create subcommand to generate SHA256Sum for user to upload
- Create URL guesser for SHA256Sum file
- Generate CT URL based on the URL guess
- Ensure embedded SCT check also checks CN

# Public Release
- Take github credentials via environment variables
- Define roadmap for self-hosting
- Define well-known URL for discovering domain for release discovery for a domain

## PR+1 - All file GH Release Test

Use: Prove that the sha256sum can support all files for a given release

- Introduce database to hold onto sha256sum info and index to org/project/release tuple

## MVP+3 - All digests for a Docker image

Use: Prove that the scheme works for docker images as well


## Public Release
- Index top NNN docker images and github repos into the service

# Lessons Learned

- Let's encrypt requires a CN that is shorter than 64 bytes. Thus 5c793eed08df469f8a40a0465f767677.secured.ifup.org
- Github has multiple URLs for the same release tarball depending on API or website lookup


# Nice to have

- Save OAUTH token for github into a config file
